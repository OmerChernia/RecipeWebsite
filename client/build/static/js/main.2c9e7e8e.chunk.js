(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){e.exports=a(24)},24:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(8),l=a.n(c),o=(a(13),a(26));const i="http://localhost:8081/api",s=o.a.create({baseURL:i});console.log("API Base URL:",i),s.interceptors.request.use(e=>(console.log("Starting Request",e),e)),s.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t?(e.headers.Authorization="Bearer "+t,console.log("Authorization header set:",e.headers.Authorization)):console.log("No token found in localStorage"),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),e.response?(console.error("Response data:",e.response.data),console.error("Response status:",e.response.status),console.error("Response headers:",e.response.headers)):e.request?console.error("No response received:",e.request):console.error("Error setting up request:",e.message),Promise.reject(e)));var u=s;var m=a(5),d=a(3);var g=()=>n.a.createElement("div",{className:"banner-container"},n.a.createElement("div",{className:"banner-icons"},n.a.createElement("img",{src:"/food.png",alt:"Food",className:"banner-icon food-icon"}),n.a.createElement("img",{src:"/pickles.png",alt:"Pickles",className:"banner-icon pickles-icon"}),n.a.createElement("img",{src:"/cooking.png",alt:"Cooking",className:"banner-icon cooking-icon"}),n.a.createElement("img",{src:"/bottle.png",alt:"Bottle",className:"banner-icon bottle-icon"})),n.a.createElement("div",{className:"banner"},n.a.createElement(m.b,{to:"/",className:"banner-title"},n.a.createElement("h1",null,"\u05d7\u05de\u05d5\u05e6\u05d9\u05dd \u05e2\u05dd \u05d7\u05de\u05d5\u05e6\u05d9\u05dd")),n.a.createElement("div",{className:"banner-separator"}),n.a.createElement("p",null,"\u05d4\u05de\u05ea\u05db\u05d5\u05e0\u05d9\u05dd \u05d4\u05db\u05d9 \u05d8\u05e2\u05d9\u05de\u05d9\u05dd \u05dc\u05d7\u05de\u05d5\u05e6\u05d9\u05dd \u05d1\u05d9\u05ea\u05d9\u05d9\u05dd")));var p=e=>{let{categories:t,selectedCategory:a,onCategoryChange:r,isAdmin:c,refreshCategories:l}=e;return n.a.createElement("div",{className:"category-filter"},n.a.createElement("button",{onClick:()=>r(null),className:null===a?"active":""},"All"),t.map(e=>n.a.createElement("div",{key:e._id,className:"category-button-group"},n.a.createElement("button",{onClick:()=>r(e._id),className:a===e._id?"active":""},e.name),c&&a===e._id&&n.a.createElement("button",{onClick:()=>(async e=>{if(window.confirm("\u05d4\u05d0\u05dd \u05d0\u05ea\u05d4 \u05d1\u05d8\u05d5\u05d7 \u05e9\u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d6\u05d5?"))try{await u.delete("/categories/"+e),alert("\u05d4\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05e0\u05de\u05d7\u05e7\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"),l&&l()}catch(t){console.error("Error deleting category:",t),alert("\u05e9\u05d2\u05d9\u05d0\u05d4 \u05d1\u05de\u05d7\u05d9\u05e7\u05ea \u05d4\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4")}})(e._id),className:"delete-category-btn"},"Delete"))))};var E=e=>{let{selectedCategory:t}=e;const[a,c]=Object(r.useState)([]);Object(r.useEffect)(()=>{l()},[t]);const l=async()=>{try{console.log("Fetching recipes from:",i+"/recipes");const e=await u.get("/recipes");console.log("Recipes fetched:",e.data),c(e.data)}catch(e){console.error("Error fetching recipes:",e)}},o=null===t?a:a.filter(e=>e.category&&e.category._id===t);return n.a.createElement("div",{className:"recipe-list"},n.a.createElement("div",{className:"recipe-grid"},o.map(e=>n.a.createElement(m.b,{to:"/recipe/"+e._id,key:e._id,className:"recipe-card"},e.image&&n.a.createElement("img",{src:"http://localhost:8081"+e.image,alt:e.title,onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/150?text=No+Image"}}),n.a.createElement("div",{className:"content"},n.a.createElement("h2",null,e.title),n.a.createElement("p",{className:"cooking-time"},e.cookingTime," \u05d3\u05e7\u05d5\u05ea"))))))};var h=e=>{let{setIsAuthenticated:t,handleLogin:a}=e;const[c,l]=Object(r.useState)(""),[o,i]=Object(r.useState)(""),s=Object(d.p)();return n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await u.post("/auth/login",{username:c,password:o});a(e.data.token),s("/")}catch(t){console.error("Login failed",t),alert("Login failed. Please check your credentials and try again.")}},className:"login-form"},n.a.createElement("h2",null,"\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea"),n.a.createElement("input",{type:"text",placeholder:"Username",value:c,onChange:e=>l(e.target.value),required:!0}),n.a.createElement("input",{type:"password",placeholder:"Password",value:o,onChange:e=>i(e.target.value),required:!0}),n.a.createElement("button",{type:"submit"},"\u05d4\u05ea\u05d7\u05d1\u05e8"))};var b=()=>{const[e,t]=Object(r.useState)(""),[a,c]=Object(r.useState)(""),[l,o]=Object(r.useState)(""),[i,s]=Object(r.useState)(""),[m,g]=Object(r.useState)(""),[p,E]=Object(r.useState)(""),[h,b]=Object(r.useState)(""),[v,y]=Object(r.useState)(null),[f,S]=Object(r.useState)([]),N=Object(d.p)();Object(r.useEffect)(()=>{O()},[]);const O=async()=>{try{const e=await u.get("/categories");S(e.data)}catch(e){console.error("Error fetching categories:",e)}};return n.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const r=new FormData;r.append("title",e),r.append("description",a),r.append("ingredients",JSON.stringify(l.split("\n"))),r.append("instructions",JSON.stringify(i.split("\n"))),r.append("cookingTime",m),r.append("servings",p),r.append("category",h),v&&r.append("image",v);try{const e=await u.post("/recipes",r,{headers:{"Content-Type":"multipart/form-data"}});alert("Recipe added successfully!"),N("/recipe/"+e.data._id)}catch(n){console.error(n),alert("Error adding recipe")}},className:"add-recipe-form"},n.a.createElement("h2",null,"\u05d4\u05d5\u05e1\u05e3 \u05de\u05ea\u05db\u05d5\u05df \u05d7\u05d3\u05e9"),n.a.createElement("input",{type:"text",placeholder:"\u05db\u05d5\u05ea\u05e8\u05ea",value:e,onChange:e=>t(e.target.value),required:!0}),n.a.createElement("textarea",{placeholder:"\u05ea\u05d9\u05d0\u05d5\u05e8",value:a,onChange:e=>c(e.target.value),required:!0}),n.a.createElement("textarea",{placeholder:"\u05de\u05e6\u05e8\u05db\u05d9\u05dd (\u05d0\u05d7\u05d3 \u05d1\u05db\u05dc \u05e9\u05d5\u05e8\u05d4)",value:l,onChange:e=>o(e.target.value),required:!0}),n.a.createElement("textarea",{placeholder:"\u05d4\u05d5\u05e8\u05d0\u05d5\u05ea \u05d4\u05db\u05e0\u05d4 (\u05d0\u05d7\u05ea \u05d1\u05db\u05dc \u05e9\u05d5\u05e8\u05d4)",value:i,onChange:e=>s(e.target.value),required:!0}),n.a.createElement("input",{type:"number",placeholder:"\u05d6\u05de\u05df \u05d1\u05d9\u05e9\u05d5\u05dc (\u05d1\u05d3\u05e7\u05d5\u05ea)",value:m,onChange:e=>g(e.target.value),required:!0}),n.a.createElement("input",{type:"number",placeholder:"\u05db\u05de\u05d5\u05ea \u05d4\u05d2\u05e9\u05d5\u05ea \u05dc\u05de\u05e0\u05d4",value:p,onChange:e=>E(e.target.value),required:!0}),n.a.createElement("select",{value:h,onChange:e=>b(e.target.value),required:!0},n.a.createElement("option",{value:""},"\u05d1\u05d7\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"),f.map(e=>n.a.createElement("option",{key:e._id,value:e._id},e.name))),n.a.createElement("input",{type:"file",onChange:e=>y(e.target.files[0]),accept:"image/*",required:!0}),n.a.createElement("button",{type:"submit"},"\u05d4\u05d5\u05e1\u05e3 \u05de\u05ea\u05db\u05d5\u05df"))};var v=()=>{const[e,t]=Object(r.useState)(""),a=Object(d.p)();return n.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{await u.post("/categories",{name:e}),alert("Category added successfully!"),a("/")}catch(r){console.error("Error adding category:",r),alert("Error adding category")}},className:"add-category-form"},n.a.createElement("h2",null,"\u05d4\u05d5\u05e1\u05e3 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4 \u05d7\u05d3\u05e9\u05d4"),n.a.createElement("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"\u05e9\u05dd \u05d4\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4",required:!0}),n.a.createElement("button",{type:"submit"},"\u05d4\u05d5\u05e1\u05e3 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"))};var y=e=>{let{isAdmin:t}=e;const[a,c]=Object(r.useState)(null),{id:l}=Object(d.r)();return Object(r.useEffect)(()=>{(async()=>{try{const e=await u.get("/recipes/"+l);c(e.data)}catch(e){console.error("Error fetching recipe:",e)}})()},[l]),a?n.a.createElement("div",{className:"recipe-details"},n.a.createElement("div",{className:"recipe-info"},n.a.createElement("h1",null,a.title),n.a.createElement("p",null,"\u05d6\u05de\u05df \u05d4\u05db\u05e0\u05d4: ",a.cookingTime," \u05d3\u05e7\u05d5\u05ea"),n.a.createElement("p",null,"\u05de\u05e0\u05d5\u05ea: ",a.servings),n.a.createElement("h3",null,"\u05de\u05e6\u05e8\u05db\u05d9\u05dd:"),n.a.createElement("ul",null,a.ingredients.map((e,t)=>n.a.createElement("li",{key:t},e))),n.a.createElement("h3",null,"\u05d4\u05d5\u05e8\u05d0\u05d5\u05ea \u05d4\u05db\u05e0\u05d4:"),n.a.createElement("ol",null,a.instructions.map((e,t)=>n.a.createElement("li",{key:t},e))),t&&n.a.createElement("div",null,n.a.createElement(m.b,{to:"/edit-recipe/"+a._id},n.a.createElement("button",null,"\u05e2\u05e8\u05d5\u05da \u05de\u05ea\u05db\u05d5\u05df")))),n.a.createElement("div",{className:"recipe-image"},n.a.createElement("img",{src:a.image,alt:a.title,onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/150?text=No+Image"}}))):n.a.createElement("div",null,"Loading...")};var f=()=>{const{id:e}=Object(d.r)(),t=Object(d.p)(),[a,c]=Object(r.useState)(null),[l,o]=Object(r.useState)([]),[i,s]=Object(r.useState)({title:"",description:"",ingredients:"",instructions:"",cookingTime:"",servings:"",category:"",image:null}),[m,g]=Object(r.useState)(""),[p,E]=Object(r.useState)(""),[h,b]=Object(r.useState)(""),[v,y]=Object(r.useState)(""),[f,S]=Object(r.useState)(""),[N,O]=Object(r.useState)(""),[j,C]=Object(r.useState)(""),[k,q]=Object(r.useState)(null);Object(r.useEffect)(()=>{u.get("/recipes/"+e).then(e=>{c(e.data),s({title:e.data.title,description:e.data.description,ingredients:JSON.stringify(e.data.ingredients),instructions:JSON.stringify(e.data.instructions),cookingTime:e.data.cookingTime,servings:e.data.servings,category:e.data.category,image:e.data.image})}).catch(e=>{console.error("Error fetching recipe:",e),alert("Failed to fetch recipe data.")}),u.get("/categories").then(e=>o(e.data)).catch(e=>{console.error("Error fetching categories:",e),alert("Failed to fetch categories.")})},[e]);return a?n.a.createElement("div",{className:"edit-recipe-container"},n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();try{const a={...i,ingredients:JSON.parse(i.ingredients),instructions:JSON.parse(i.instructions)},r=await u.put("/recipes/"+e,a);alert("Recipe updated successfully!"),t("/recipe/"+r.data._id)}catch(r){console.error("Error updating recipe:",r),alert("Failed to update recipe.")}},className:"add-recipe-form"},n.a.createElement("h2",null,"\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05ea\u05db\u05d5\u05df"),n.a.createElement("input",{type:"text",placeholder:"\u05db\u05d5\u05ea\u05e8\u05ea",value:m,onChange:e=>g(e.target.value),required:!0}),n.a.createElement("textarea",{placeholder:"\u05ea\u05d9\u05d0\u05d5\u05e8",value:p,onChange:e=>E(e.target.value),required:!0}),n.a.createElement("textarea",{placeholder:"\u05de\u05e6\u05e8\u05db\u05d9\u05dd (\u05d0\u05d7\u05d3 \u05d1\u05db\u05dc \u05e9\u05d5\u05e8\u05d4)",value:h,onChange:e=>b(e.target.value),required:!0}),n.a.createElement("textarea",{placeholder:"\u05d4\u05d5\u05e8\u05d0\u05d5\u05ea \u05d4\u05db\u05e0\u05d4 (\u05d0\u05d7\u05ea \u05d1\u05db\u05dc \u05e9\u05d5\u05e8\u05d4)",value:v,onChange:e=>y(e.target.value),required:!0}),n.a.createElement("input",{type:"number",placeholder:"\u05d6\u05de\u05df \u05d1\u05d9\u05e9\u05d5\u05dc (\u05d1\u05d3\u05e7\u05d5\u05ea)",value:f,onChange:e=>S(e.target.value),required:!0}),n.a.createElement("input",{type:"number",placeholder:"\u05db\u05de\u05d5\u05ea \u05d4\u05d2\u05e9\u05d5\u05ea \u05dc\u05de\u05e0\u05d4",value:N,onChange:e=>O(e.target.value),required:!0}),n.a.createElement("select",{value:j,onChange:e=>C(e.target.value),required:!0},n.a.createElement("option",{value:""},"\u05d1\u05d7\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"),l.map(e=>n.a.createElement("option",{key:e._id,value:e._id},e.name))),n.a.createElement("input",{type:"file",onChange:e=>q(e.target.files[0]),accept:"image/*"}),n.a.createElement("button",{type:"submit"},"\u05e2\u05d3\u05db\u05df \u05de\u05ea\u05db\u05d5\u05df"))):n.a.createElement("div",null,"Loading...")};var S=e=>{let{isAuthenticated:t,onLogout:a}=e;return n.a.createElement("div",{className:"floating-buttons"},t?n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:a,className:"floating-button logout-button"},"\u05d4\u05ea\u05e0\u05ea\u05e7\u05d5\u05ea"),n.a.createElement(m.b,{to:"/add-recipe",className:"floating-button add-recipe-button"},"\u05d4\u05d5\u05e1\u05e3 \u05de\u05ea\u05db\u05d5\u05df"),n.a.createElement(m.b,{to:"/add-category",className:"floating-button add-category-button"},"\u05d4\u05d5\u05e1\u05e3 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4")):n.a.createElement(m.b,{to:"/login",className:"floating-button login-button"},"\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea"))};var N=function(){const[e,t]=Object(r.useState)(!1),[a,c]=Object(r.useState)(!1),[l,o]=Object(r.useState)([]),[i,s]=Object(r.useState)(null);Object(r.useEffect)(()=>{N(),u.get("/categories").then(e=>o(e.data)).catch(e=>console.error("Error fetching categories:",e))},[]);const N=()=>{localStorage.getItem("token")?u.get("/auth/me").then(e=>{t(!0),c(e.data.isAdmin)}).catch(e=>{console.error(e),t(!1),c(!1),localStorage.removeItem("token")}):(t(!1),c(!1))};return n.a.createElement(m.a,null,n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"fixed-header"},n.a.createElement(g,null),n.a.createElement("div",{className:"banner-category-separator"}),n.a.createElement(p,{categories:l,selectedCategory:i,onCategoryChange:e=>{s(e)},isAdmin:a,refreshCategories:()=>{u.get("/categories").then(e=>o(e.data)).catch(e=>console.error("Error fetching categories:",e))}})),n.a.createElement("div",{className:"main-content"},n.a.createElement(d.d,null,n.a.createElement(d.b,{path:"/",element:n.a.createElement(E,{categories:l,selectedCategory:i})}),n.a.createElement(d.b,{path:"/login",element:e?n.a.createElement(d.a,{to:"/"}):n.a.createElement(h,{handleLogin:e=>{localStorage.setItem("token",e),N()}})}),n.a.createElement(d.b,{path:"/add-recipe",element:e&&a?n.a.createElement(b,null):n.a.createElement(d.a,{to:"/login"})}),n.a.createElement(d.b,{path:"/add-category",element:e&&a?n.a.createElement(v,null):n.a.createElement(d.a,{to:"/login"})}),n.a.createElement(d.b,{path:"/recipe/:id",element:n.a.createElement(y,{isAdmin:a})}),n.a.createElement(d.b,{path:"/edit-recipe/:id",element:e&&a?n.a.createElement(f,null):n.a.createElement(d.a,{to:"/login"})}))),n.a.createElement(S,{isAuthenticated:e,onLogout:()=>{t(!1),c(!1),localStorage.removeItem("token"),console.log("User logged out")}})))};var O=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,27)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:c,getTTFB:l}=t;a(e),r(e),n(e),c(e),l(e)})};l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),O()}},[[14,1,2]]]);
//# sourceMappingURL=main.2c9e7e8e.chunk.js.map