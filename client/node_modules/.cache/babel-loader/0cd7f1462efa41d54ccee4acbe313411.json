{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../services/api';// Use the configured API instance\nimport{useNavigate,useParams}from'react-router-dom';const EditRecipe=()=>{const{id}=useParams();const navigate=useNavigate();const[recipe,setRecipe]=useState(null);const[categories,setCategories]=useState([]);// Define categories state\nconst[formData,setFormData]=useState({title:'',description:'',ingredients:'',instructions:'',cookingTime:'',servings:'',category:'',image:null});const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[ingredients,setIngredients]=useState('');const[instructions,setInstructions]=useState('');const[cookingTime,setCookingTime]=useState('');const[servings,setServings]=useState('');const[category,setCategory]=useState('');const[image,setImage]=useState(null);useEffect(()=>{// Fetch the recipe data\napi.get(`/recipes/${id}`).then(response=>{setRecipe(response.data);setFormData({title:response.data.title,description:response.data.description,ingredients:JSON.stringify(response.data.ingredients),instructions:JSON.stringify(response.data.instructions),cookingTime:response.data.cookingTime,servings:response.data.servings,category:response.data.category,image:response.data.image});}).catch(error=>{console.error('Error fetching recipe:',error);alert('Failed to fetch recipe data.');});// Fetch categories\napi.get('/categories').then(response=>setCategories(response.data)).catch(error=>{console.error('Error fetching categories:',error);alert('Failed to fetch categories.');});},[id]);const handleChange=e=>{const{name,value,files}=e.target;if(name==='image'){setFormData({...formData,image:files[0]});}else{setFormData({...formData,[name]:value});}};const handleSubmit=async e=>{e.preventDefault();try{const updatedData={...formData,ingredients:JSON.parse(formData.ingredients),instructions:JSON.parse(formData.instructions)};const response=await api.put(`/recipes/${id}`,updatedData);alert('Recipe updated successfully!');navigate(`/recipe/${response.data._id}`);}catch(error){console.error('Error updating recipe:',error);alert('Failed to update recipe.');}};if(!recipe){return/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\");}return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-recipe-container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:\"add-recipe-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u05E2\\u05E8\\u05D9\\u05DB\\u05EA \\u05DE\\u05EA\\u05DB\\u05D5\\u05DF\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\u05EA\\u05D9\\u05D0\\u05D5\\u05E8\",value:description,onChange:e=>setDescription(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\u05DE\\u05E6\\u05E8\\u05DB\\u05D9\\u05DD (\\u05D0\\u05D7\\u05D3 \\u05D1\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4)\",value:ingredients,onChange:e=>setIngredients(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\u05D4\\u05D5\\u05E8\\u05D0\\u05D5\\u05EA \\u05D4\\u05DB\\u05E0\\u05D4 (\\u05D0\\u05D7\\u05EA \\u05D1\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4)\",value:instructions,onChange:e=>setInstructions(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"\\u05D6\\u05DE\\u05DF \\u05D1\\u05D9\\u05E9\\u05D5\\u05DC (\\u05D1\\u05D3\\u05E7\\u05D5\\u05EA)\",value:cookingTime,onChange:e=>setCookingTime(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"\\u05DB\\u05DE\\u05D5\\u05EA \\u05D4\\u05D2\\u05E9\\u05D5\\u05EA \\u05DC\\u05DE\\u05E0\\u05D4\",value:servings,onChange:e=>setServings(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"select\",{value:category,onChange:e=>setCategory(e.target.value),required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4\"),categories.map(cat=>/*#__PURE__*/React.createElement(\"option\",{key:cat._id,value:cat._id},cat.name))),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:e=>setImage(e.target.files[0]),accept:\"image/*\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"\\u05E2\\u05D3\\u05DB\\u05DF \\u05DE\\u05EA\\u05DB\\u05D5\\u05DF\")));};export default EditRecipe;","map":{"version":3,"names":["React","useState","useEffect","api","useNavigate","useParams","EditRecipe","id","navigate","recipe","setRecipe","categories","setCategories","formData","setFormData","title","description","ingredients","instructions","cookingTime","servings","category","image","setTitle","setDescription","setIngredients","setInstructions","setCookingTime","setServings","setCategory","setImage","get","then","response","data","JSON","stringify","catch","error","console","alert","handleChange","e","name","value","files","target","handleSubmit","preventDefault","updatedData","parse","put","_id","createElement","className","onSubmit","type","placeholder","onChange","required","map","cat","key","accept"],"sources":["/Users/omerchernia/CODING/Recepie_Website/client/src/components/EditRecipe.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../services/api'; // Use the configured API instance\nimport { useNavigate, useParams } from 'react-router-dom';\n\nconst EditRecipe = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [recipe, setRecipe] = useState(null);\n  const [categories, setCategories] = useState([]); // Define categories state\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    ingredients: '',\n    instructions: '',\n    cookingTime: '',\n    servings: '',\n    category: '',\n    image: null,\n  });\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [ingredients, setIngredients] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const [cookingTime, setCookingTime] = useState('');\n  const [servings, setServings] = useState('');\n  const [category, setCategory] = useState('');\n  const [image, setImage] = useState(null);\n\n  useEffect(() => {\n    // Fetch the recipe data\n    api.get(`/recipes/${id}`)\n      .then(response => {\n        setRecipe(response.data);\n        setFormData({\n          title: response.data.title,\n          description: response.data.description,\n          ingredients: JSON.stringify(response.data.ingredients),\n          instructions: JSON.stringify(response.data.instructions),\n          cookingTime: response.data.cookingTime,\n          servings: response.data.servings,\n          category: response.data.category,\n          image: response.data.image,\n        });\n      })\n      .catch(error => {\n        console.error('Error fetching recipe:', error);\n        alert('Failed to fetch recipe data.');\n      });\n\n    // Fetch categories\n    api.get('/categories')\n      .then(response => setCategories(response.data))\n      .catch(error => {\n        console.error('Error fetching categories:', error);\n        alert('Failed to fetch categories.');\n      });\n  }, [id]);\n\n  const handleChange = (e) => {\n    const { name, value, files } = e.target;\n    if (name === 'image') {\n      setFormData({ ...formData, image: files[0] });\n    } else {\n      setFormData({ ...formData, [name]: value });\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const updatedData = {\n        ...formData,\n        ingredients: JSON.parse(formData.ingredients),\n        instructions: JSON.parse(formData.instructions),\n      };\n      const response = await api.put(`/recipes/${id}`, updatedData);\n      alert('Recipe updated successfully!');\n      navigate(`/recipe/${response.data._id}`);\n    } catch (error) {\n      console.error('Error updating recipe:', error);\n      alert('Failed to update recipe.');\n    }\n  };\n\n  if (!recipe) {\n    return <div>Loading...</div>;\n  }\n  return (\n    <div className=\"edit-recipe-container\">\n      <form onSubmit={handleSubmit} className=\"add-recipe-form\">\n        <h2>עריכת מתכון</h2>\n        <input type=\"text\" placeholder=\"כותרת\" value={title} onChange={(e) => setTitle(e.target.value)} required />\n        <textarea placeholder=\"תיאור\" value={description} onChange={(e) => setDescription(e.target.value)} required />\n        <textarea placeholder=\"מצרכים (אחד בכל שורה)\" value={ingredients} onChange={(e) => setIngredients(e.target.value)} required />\n        <textarea placeholder=\"הוראות הכנה (אחת בכל שורה)\" value={instructions} onChange={(e) => setInstructions(e.target.value)} required />\n        <input type=\"number\" placeholder=\"זמן בישול (בדקות)\" value={cookingTime} onChange={(e) => setCookingTime(e.target.value)} required />\n        <input type=\"number\" placeholder=\"כמות הגשות למנה\" value={servings} onChange={(e) => setServings(e.target.value)} required />\n        <select value={category} onChange={(e) => setCategory(e.target.value)} required>\n          <option value=\"\">בחר קטגוריה</option>\n          {categories.map(cat => (\n            <option key={cat._id} value={cat._id}>{cat.name}</option>\n          ))}\n        </select>\n        <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} accept=\"image/*\" />\n        <button type=\"submit\">עדכן מתכון</button>\n      </form>\n    </div>\n  );\n};\n\nexport default EditRecipe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}