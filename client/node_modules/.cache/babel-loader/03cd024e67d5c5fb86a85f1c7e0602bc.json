{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';// Ensure this import exists\nimport api from'./services/api';// Adjust the path if necessary\nimport{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Banner from'./components/Banner';import CategoryFilter from'./components/CategoryFilter';import RecipeList from'./components/RecipeList';import Login from'./components/Login';import AddRecipe from'./components/AddRecipe';import AddCategory from'./components/AddCategory';import RecipeDetails from'./components/RecipeDetails';import EditRecipe from'./components/EditRecipe';import FloatingButtons from'./components/FloatingButtons';function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const[categories,setCategories]=useState([]);const[selectedCategory,setSelectedCategory]=useState(null);useEffect(()=>{checkAuthStatus();// Fetch categories when the component mounts\napi.get('/categories').then(response=>setCategories(response.data)).catch(error=>console.error('Error fetching categories:',error));},[]);const checkAuthStatus=()=>{const token=localStorage.getItem('token');if(token){api.get('/auth/me').then(res=>{setIsAuthenticated(true);setIsAdmin(res.data.isAdmin);}).catch(err=>{console.error(err);setIsAuthenticated(false);setIsAdmin(false);localStorage.removeItem('token');});}else{setIsAuthenticated(false);setIsAdmin(false);}};const handleLogout=()=>{setIsAuthenticated(false);setIsAdmin(false);localStorage.removeItem('token');console.log('User logged out');};const handleLogin=token=>{localStorage.setItem('token',token);checkAuthStatus();};const handleCategoryChange=categoryId=>{setSelectedCategory(categoryId);};const refreshCategories=()=>{api.get('/categories').then(response=>setCategories(response.data)).catch(error=>console.error('Error fetching categories:',error));};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-header\"},/*#__PURE__*/React.createElement(Banner,null),/*#__PURE__*/React.createElement(\"div\",{className:\"banner-category-separator\"}),/*#__PURE__*/React.createElement(CategoryFilter,{categories:categories,selectedCategory:selectedCategory,onCategoryChange:handleCategoryChange,isAdmin:isAdmin,refreshCategories:refreshCategories})),/*#__PURE__*/React.createElement(\"div\",{className:\"main-content\"},/*#__PURE__*/React.createElement(Routes,null,/*#__PURE__*/React.createElement(Route,{path:\"/\",element:/*#__PURE__*/React.createElement(RecipeList,{categories:categories,selectedCategory:selectedCategory})}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/React.createElement(Navigate,{to:\"/\"}):/*#__PURE__*/React.createElement(Login,{handleLogin:handleLogin})}),/*#__PURE__*/React.createElement(Route,{path:\"/add-recipe\",element:isAuthenticated&&isAdmin?/*#__PURE__*/React.createElement(AddRecipe,null):/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"})}),/*#__PURE__*/React.createElement(Route,{path:\"/add-category\",element:isAuthenticated&&isAdmin?/*#__PURE__*/React.createElement(AddCategory,null):/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"})}),/*#__PURE__*/React.createElement(Route,{path:\"/recipe/:id\",element:/*#__PURE__*/React.createElement(RecipeDetails,{isAdmin:isAdmin})}),/*#__PURE__*/React.createElement(Route,{path:\"/edit-recipe/:id\",element:isAuthenticated&&isAdmin?/*#__PURE__*/React.createElement(EditRecipe,null):/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"})}))),/*#__PURE__*/React.createElement(FloatingButtons,{isAuthenticated:isAuthenticated,onLogout:handleLogout})));}export default App;","map":{"version":3,"names":["React","useState","useEffect","api","BrowserRouter","Router","Routes","Route","Navigate","Banner","CategoryFilter","RecipeList","Login","AddRecipe","AddCategory","RecipeDetails","EditRecipe","FloatingButtons","App","isAuthenticated","setIsAuthenticated","isAdmin","setIsAdmin","categories","setCategories","selectedCategory","setSelectedCategory","checkAuthStatus","get","then","response","data","catch","error","console","token","localStorage","getItem","res","err","removeItem","handleLogout","log","handleLogin","setItem","handleCategoryChange","categoryId","refreshCategories","createElement","className","onCategoryChange","path","element","to","onLogout"],"sources":["/Users/omerchernia/CODING/Recepie_Website/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css'; // Ensure this import exists\nimport api from './services/api'; // Adjust the path if necessary\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Banner from './components/Banner';\nimport CategoryFilter from './components/CategoryFilter';\nimport RecipeList from './components/RecipeList';\nimport Login from './components/Login';\nimport AddRecipe from './components/AddRecipe';\nimport AddCategory from './components/AddCategory';\nimport RecipeDetails from './components/RecipeDetails';\nimport EditRecipe from './components/EditRecipe';\nimport FloatingButtons from './components/FloatingButtons';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n\n  useEffect(() => {\n    checkAuthStatus();\n    // Fetch categories when the component mounts\n    api.get('/categories')\n      .then(response => setCategories(response.data))\n      .catch(error => console.error('Error fetching categories:', error));\n  }, []);\n\n  const checkAuthStatus = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      api.get('/auth/me')\n        .then(res => {\n          setIsAuthenticated(true);\n          setIsAdmin(res.data.isAdmin);\n        })\n        .catch(err => {\n          console.error(err);\n          setIsAuthenticated(false);\n          setIsAdmin(false);\n          localStorage.removeItem('token');\n        });\n    } else {\n      setIsAuthenticated(false);\n      setIsAdmin(false);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    setIsAdmin(false);\n    localStorage.removeItem('token');\n    console.log('User logged out');\n  };\n\n  const handleLogin = (token) => {\n    localStorage.setItem('token', token);\n    checkAuthStatus();\n  };\n\n  const handleCategoryChange = (categoryId) => {\n    setSelectedCategory(categoryId);\n  };\n\n  const refreshCategories = () => {\n    api.get('/categories')\n      .then(response => setCategories(response.data))\n      .catch(error => console.error('Error fetching categories:', error));\n  };\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <div className=\"fixed-header\">\n          <Banner />\n          <div className=\"banner-category-separator\"></div>\n          <CategoryFilter \n            categories={categories}\n            selectedCategory={selectedCategory}\n            onCategoryChange={handleCategoryChange}\n            isAdmin={isAdmin}\n            refreshCategories={refreshCategories}\n          />\n        </div>\n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/\" element={<RecipeList categories={categories} selectedCategory={selectedCategory} />} />\n            <Route path=\"/login\" element={isAuthenticated ? <Navigate to=\"/\" /> : <Login handleLogin={handleLogin} />} />\n            <Route path=\"/add-recipe\" element={isAuthenticated && isAdmin ? <AddRecipe /> : <Navigate to=\"/login\" />} />\n            <Route path=\"/add-category\" element={isAuthenticated && isAdmin ? <AddCategory /> : <Navigate to=\"/login\" />} />\n            <Route path=\"/recipe/:id\" element={<RecipeDetails isAdmin={isAdmin} />} />\n            <Route path=\"/edit-recipe/:id\" element={isAuthenticated && isAdmin ? <EditRecipe /> : <Navigate to=\"/login\" />} />\n          </Routes>\n        </div>\n        <FloatingButtons \n          isAuthenticated={isAuthenticated} \n          onLogout={handleLogout}\n        />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}