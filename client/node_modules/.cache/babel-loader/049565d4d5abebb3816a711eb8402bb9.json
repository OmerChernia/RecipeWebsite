{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../services/api';// Use the configured Axios instance\nimport{useNavigate,useParams}from'react-router-dom';const EditRecipe=()=>{const{id}=useParams();const navigate=useNavigate();const[recipe,setRecipe]=useState(null);const[categories,setCategories]=useState([]);// Define categories state\nconst[formData,setFormData]=useState({title:'',description:'',ingredients:'',instructions:'',cookingTime:'',servings:'',category:'',image:null});useEffect(()=>{// Fetch the recipe data\napi.get(`/recipes/${id}`).then(response=>{setRecipe(response.data);setFormData({title:response.data.title,description:response.data.description,ingredients:JSON.stringify(response.data.ingredients),instructions:JSON.stringify(response.data.instructions),cookingTime:response.data.cookingTime,servings:response.data.servings,category:response.data.category,image:response.data.image});}).catch(error=>{console.error('Error fetching recipe:',error);alert('Failed to fetch recipe data.');});// Fetch categories\napi.get('/categories').then(response=>setCategories(response.data)).catch(error=>{console.error('Error fetching categories:',error);alert('Failed to fetch categories.');});},[id]);const handleChange=e=>{const{name,value,files}=e.target;if(name==='image'){setFormData({...formData,image:files[0]});}else{setFormData({...formData,[name]:value});}};const handleSubmit=async e=>{e.preventDefault();try{const updatedData={...formData,ingredients:JSON.parse(formData.ingredients),instructions:JSON.parse(formData.instructions)};const response=await api.put(`/recipes/${id}`,updatedData);alert('Recipe updated successfully!');navigate(`/recipe/${response.data._id}`);}catch(error){console.error('Error updating recipe:',error);alert('Failed to update recipe.');}};if(!recipe){return/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\");}return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:\"edit-recipe-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Edit Recipe\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"title\",placeholder:\"Title\",value:formData.title,onChange:handleChange,required:true}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"description\",placeholder:\"Description\",value:formData.description,onChange:handleChange,required:true}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"ingredients\",placeholder:\"Ingredients (JSON format)\",value:formData.ingredients,onChange:handleChange,required:true}),/*#__PURE__*/React.createElement(\"textarea\",{name:\"instructions\",placeholder:\"Instructions (JSON format)\",value:formData.instructions,onChange:handleChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",name:\"cookingTime\",placeholder:\"Cooking Time (minutes)\",value:formData.cookingTime,onChange:handleChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",name:\"servings\",placeholder:\"Servings\",value:formData.servings,onChange:handleChange,required:true}),/*#__PURE__*/React.createElement(\"select\",{name:\"category\",value:formData.category,onChange:handleChange,required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Category\"),categories.map(category=>/*#__PURE__*/React.createElement(\"option\",{key:category._id,value:category.name},category.name))),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",name:\"image\",accept:\"image/*\",onChange:handleChange}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Update Recipe\"));};export default EditRecipe;","map":{"version":3,"names":["React","useState","useEffect","api","useNavigate","useParams","EditRecipe","id","navigate","recipe","setRecipe","categories","setCategories","formData","setFormData","title","description","ingredients","instructions","cookingTime","servings","category","image","get","then","response","data","JSON","stringify","catch","error","console","alert","handleChange","e","name","value","files","target","handleSubmit","preventDefault","updatedData","parse","put","_id","createElement","onSubmit","className","type","placeholder","onChange","required","map","key","accept"],"sources":["/Users/omerchernia/CODING/Recepie_Website/client/src/components/EditRecipe.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../services/api'; // Use the configured Axios instance\nimport { useNavigate, useParams } from 'react-router-dom';\n\nconst EditRecipe = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [recipe, setRecipe] = useState(null);\n  const [categories, setCategories] = useState([]); // Define categories state\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    ingredients: '',\n    instructions: '',\n    cookingTime: '',\n    servings: '',\n    category: '',\n    image: null,\n  });\n\n  useEffect(() => {\n    // Fetch the recipe data\n    api.get(`/recipes/${id}`)\n      .then(response => {\n        setRecipe(response.data);\n        setFormData({\n          title: response.data.title,\n          description: response.data.description,\n          ingredients: JSON.stringify(response.data.ingredients),\n          instructions: JSON.stringify(response.data.instructions),\n          cookingTime: response.data.cookingTime,\n          servings: response.data.servings,\n          category: response.data.category,\n          image: response.data.image,\n        });\n      })\n      .catch(error => {\n        console.error('Error fetching recipe:', error);\n        alert('Failed to fetch recipe data.');\n      });\n\n    // Fetch categories\n    api.get('/categories')\n      .then(response => setCategories(response.data))\n      .catch(error => {\n        console.error('Error fetching categories:', error);\n        alert('Failed to fetch categories.');\n      });\n  }, [id]);\n\n  const handleChange = (e) => {\n    const { name, value, files } = e.target;\n    if (name === 'image') {\n      setFormData({ ...formData, image: files[0] });\n    } else {\n      setFormData({ ...formData, [name]: value });\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const updatedData = {\n        ...formData,\n        ingredients: JSON.parse(formData.ingredients),\n        instructions: JSON.parse(formData.instructions),\n      };\n      const response = await api.put(`/recipes/${id}`, updatedData);\n      alert('Recipe updated successfully!');\n      navigate(`/recipe/${response.data._id}`);\n    } catch (error) {\n      console.error('Error updating recipe:', error);\n      alert('Failed to update recipe.');\n    }\n  };\n\n  if (!recipe) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"edit-recipe-form\">\n      <h2>Edit Recipe</h2>\n      <input\n        type=\"text\"\n        name=\"title\"\n        placeholder=\"Title\"\n        value={formData.title}\n        onChange={handleChange}\n        required\n      />\n      <textarea\n        name=\"description\"\n        placeholder=\"Description\"\n        value={formData.description}\n        onChange={handleChange}\n        required\n      />\n      <textarea\n        name=\"ingredients\"\n        placeholder=\"Ingredients (JSON format)\"\n        value={formData.ingredients}\n        onChange={handleChange}\n        required\n      />\n      <textarea\n        name=\"instructions\"\n        placeholder=\"Instructions (JSON format)\"\n        value={formData.instructions}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"number\"\n        name=\"cookingTime\"\n        placeholder=\"Cooking Time (minutes)\"\n        value={formData.cookingTime}\n        onChange={handleChange}\n        required\n      />\n      <input\n        type=\"number\"\n        name=\"servings\"\n        placeholder=\"Servings\"\n        value={formData.servings}\n        onChange={handleChange}\n        required\n      />\n      <select\n        name=\"category\"\n        value={formData.category}\n        onChange={handleChange}\n        required\n      >\n        <option value=\"\">Select Category</option>\n        {categories.map(category => (\n          <option key={category._id} value={category.name}>\n            {category.name}\n          </option>\n        ))}\n      </select>\n      <input\n        type=\"file\"\n        name=\"image\"\n        accept=\"image/*\"\n        onChange={handleChange}\n      />\n      <button type=\"submit\">Update Recipe</button>\n    </form>\n  );\n};\n\nexport default EditRecipe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}