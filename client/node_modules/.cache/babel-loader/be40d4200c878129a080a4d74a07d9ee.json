{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';const EditRecipe=()=>{const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[ingredients,setIngredients]=useState('');const[instructions,setInstructions]=useState('');const[cookingTime,setCookingTime]=useState('');const[servings,setServings]=useState('');const[category,setCategory]=useState('');const[image,setImage]=useState(null);const[categories,setCategories]=useState([]);const{id}=useParams();const navigate=useNavigate();const fetchRecipe=useCallback(async()=>{try{const res=await axios.get(`/api/recipes/${id}`);const recipe=res.data;setTitle(recipe.title);setDescription(recipe.description);setIngredients(recipe.ingredients.join('\\n'));// Join array with newlines\nsetInstructions(recipe.instructions.join('\\n'));// Join array with newlines\nsetCookingTime(recipe.cookingTime);setServings(recipe.servings);setCategory(recipe.category._id);}catch(err){console.error('Error fetching recipe:',err);}},[id]);useEffect(()=>{fetchRecipe();fetchCategories();},[fetchRecipe]);const fetchCategories=async()=>{try{const res=await axios.get('/api/categories');setCategories(res.data);}catch(err){console.error('Error fetching categories:',err);}};const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append('title',title);formData.append('description',description);formData.append('ingredients',JSON.stringify(ingredients.split('\\n')));// Split into array\nformData.append('instructions',JSON.stringify(instructions.split('\\n')));// Split into array\nformData.append('cookingTime',cookingTime);formData.append('servings',servings);formData.append('category',category);if(image)formData.append('image',image);try{await axios.put(`/api/recipes/${id}`,formData,{headers:{'Content-Type':'multipart/form-data','x-auth-token':localStorage.getItem('token')}});alert('המתכון עודכן בהצלחה!');navigate(`/recipe/${id}`);}catch(err){console.error(err);alert('שגיאה בעדכון המתכון');}};const handleDelete=async()=>{if(window.confirm('האם אתה בטוח שברצונך למחוק מתכון זה?')){try{await axios.delete(`/api/recipes/${id}`,{headers:{'x-auth-token':localStorage.getItem('token')}});alert('המתכון נמחק בהצלחה!');navigate('/');}catch(err){console.error(err);alert('שגיאה במחיקת המתכון');}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"edit-recipe-container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,className:\"add-recipe-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u05E2\\u05E8\\u05D9\\u05DB\\u05EA \\u05DE\\u05EA\\u05DB\\u05D5\\u05DF\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"\\u05DB\\u05D5\\u05EA\\u05E8\\u05EA\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\u05EA\\u05D9\\u05D0\\u05D5\\u05E8\",value:description,onChange:e=>setDescription(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\u05DE\\u05E6\\u05E8\\u05DB\\u05D9\\u05DD (\\u05D0\\u05D7\\u05D3 \\u05D1\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4)\",value:ingredients,onChange:e=>setIngredients(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"\\u05D4\\u05D5\\u05E8\\u05D0\\u05D5\\u05EA \\u05D4\\u05DB\\u05E0\\u05D4 (\\u05D0\\u05D7\\u05EA \\u05D1\\u05DB\\u05DC \\u05E9\\u05D5\\u05E8\\u05D4)\",value:instructions,onChange:e=>setInstructions(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"\\u05D6\\u05DE\\u05DF \\u05D1\\u05D9\\u05E9\\u05D5\\u05DC (\\u05D1\\u05D3\\u05E7\\u05D5\\u05EA)\",value:cookingTime,onChange:e=>setCookingTime(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"\\u05DB\\u05DE\\u05D5\\u05EA \\u05D4\\u05D2\\u05E9\\u05D5\\u05EA \\u05DC\\u05DE\\u05E0\\u05D4\",value:servings,onChange:e=>setServings(e.target.value),required:true}),/*#__PURE__*/React.createElement(\"select\",{value:category,onChange:e=>setCategory(e.target.value),required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"\\u05D1\\u05D7\\u05E8 \\u05E7\\u05D8\\u05D2\\u05D5\\u05E8\\u05D9\\u05D4\"),categories.map(cat=>/*#__PURE__*/React.createElement(\"option\",{key:cat._id,value:cat._id},cat.name))),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:e=>setImage(e.target.files[0]),accept:\"image/*\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"\\u05E2\\u05D3\\u05DB\\u05DF \\u05DE\\u05EA\\u05DB\\u05D5\\u05DF\")),/*#__PURE__*/React.createElement(\"button\",{onClick:handleDelete,className:\"delete-recipe-btn\"},\"\\u05DE\\u05D7\\u05E7 \\u05DE\\u05EA\\u05DB\\u05D5\\u05DF\"));};export default EditRecipe;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","axios","EditRecipe","title","setTitle","description","setDescription","ingredients","setIngredients","instructions","setInstructions","cookingTime","setCookingTime","servings","setServings","category","setCategory","image","setImage","categories","setCategories","id","navigate","fetchRecipe","res","get","recipe","data","join","_id","err","console","error","fetchCategories","handleSubmit","e","preventDefault","formData","FormData","append","JSON","stringify","split","put","headers","localStorage","getItem","alert","handleDelete","window","confirm","delete","createElement","className","onSubmit","type","placeholder","value","onChange","target","required","map","cat","key","name","files","accept","onClick"],"sources":["/Users/omerchernia/CODING/Recepie_Website/client/src/components/EditRecipe.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst EditRecipe = () => {\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [ingredients, setIngredients] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const [cookingTime, setCookingTime] = useState('');\n  const [servings, setServings] = useState('');\n  const [category, setCategory] = useState('');\n  const [image, setImage] = useState(null);\n  const [categories, setCategories] = useState([]);\n\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const fetchRecipe = useCallback(async () => {\n    try {\n      const res = await axios.get(`/api/recipes/${id}`);\n      const recipe = res.data;\n      setTitle(recipe.title);\n      setDescription(recipe.description);\n      setIngredients(recipe.ingredients.join('\\n')); // Join array with newlines\n      setInstructions(recipe.instructions.join('\\n')); // Join array with newlines\n      setCookingTime(recipe.cookingTime);\n      setServings(recipe.servings);\n      setCategory(recipe.category._id);\n    } catch (err) {\n      console.error('Error fetching recipe:', err);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    fetchRecipe();\n    fetchCategories();\n  }, [fetchRecipe]);\n\n  const fetchCategories = async () => {\n    try {\n      const res = await axios.get('/api/categories');\n      setCategories(res.data);\n    } catch (err) {\n      console.error('Error fetching categories:', err);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('title', title);\n    formData.append('description', description);\n    formData.append('ingredients', JSON.stringify(ingredients.split('\\n'))); // Split into array\n    formData.append('instructions', JSON.stringify(instructions.split('\\n'))); // Split into array\n    formData.append('cookingTime', cookingTime);\n    formData.append('servings', servings);\n    formData.append('category', category);\n    if (image) formData.append('image', image);\n\n    try {\n      await axios.put(`/api/recipes/${id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'x-auth-token': localStorage.getItem('token')\n        }\n      });\n      alert('המתכון עודכן בהצלחה!');\n      navigate(`/recipe/${id}`);\n    } catch (err) {\n      console.error(err);\n      alert('שגיאה בעדכון המתכון');\n    }\n  };\n\n  const handleDelete = async () => {\n    if (window.confirm('האם אתה בטוח שברצונך למחוק מתכון זה?')) {\n      try {\n        await axios.delete(`/api/recipes/${id}`, {\n          headers: {\n            'x-auth-token': localStorage.getItem('token')\n          }\n        });\n        alert('המתכון נמחק בהצלחה!');\n        navigate('/');\n      } catch (err) {\n        console.error(err);\n        alert('שגיאה במחיקת המתכון');\n      }\n    }\n  };\n\n  return (\n    <div className=\"edit-recipe-container\">\n      <form onSubmit={handleSubmit} className=\"add-recipe-form\">\n        <h2>עריכת מתכון</h2>\n        <input type=\"text\" placeholder=\"כותרת\" value={title} onChange={(e) => setTitle(e.target.value)} required />\n        <textarea placeholder=\"תיאור\" value={description} onChange={(e) => setDescription(e.target.value)} required />\n        <textarea placeholder=\"מצרכים (אחד בכל שורה)\" value={ingredients} onChange={(e) => setIngredients(e.target.value)} required />\n        <textarea placeholder=\"הוראות הכנה (אחת בכל שורה)\" value={instructions} onChange={(e) => setInstructions(e.target.value)} required />\n        <input type=\"number\" placeholder=\"זמן בישול (בדקות)\" value={cookingTime} onChange={(e) => setCookingTime(e.target.value)} required />\n        <input type=\"number\" placeholder=\"כמות הגשות למנה\" value={servings} onChange={(e) => setServings(e.target.value)} required />\n        <select value={category} onChange={(e) => setCategory(e.target.value)} required>\n          <option value=\"\">בחר קטגוריה</option>\n          {categories.map(cat => (\n            <option key={cat._id} value={cat._id}>{cat.name}</option>\n          ))}\n        </select>\n        <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} accept=\"image/*\" />\n        <button type=\"submit\">עדכן מתכון</button>\n      </form>\n      <button onClick={handleDelete} className=\"delete-recipe-btn\">מחק מתכון</button>\n    </div>\n  );\n};\n\nexport default EditRecipe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}