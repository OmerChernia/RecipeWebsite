{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import axios from'axios';import Banner from'./components/Banner';// Import the new Banner component\nimport CategoryFilter from'./components/CategoryFilter';// Import this\nimport RecipeList from'./components/RecipeList';import Login from'./components/Login';import AddRecipe from'./components/AddRecipe';import AddCategory from'./components/AddCategory';import RecipeDetails from'./components/RecipeDetails';import EditRecipe from'./components/EditRecipe';import'./App.css';import FloatingButtons from'./components/FloatingButtons';function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);// Set to false initially\nconst[isAdmin,setIsAdmin]=useState(false);const[categories,setCategories]=useState([]);// Add this state\nconst[selectedCategory,setSelectedCategory]=useState(null);// Add this state\nuseEffect(()=>{checkAuthStatus();// Fetch categories when the component mounts\naxios.get('/api/categories').then(response=>setCategories(response.data)).catch(error=>console.error('Error fetching categories:',error));},[]);const checkAuthStatus=()=>{const token=localStorage.getItem('token');if(token){axios.get('/api/auth/me',{headers:{'x-auth-token':token}}).then(res=>{setIsAuthenticated(true);setIsAdmin(res.data.isAdmin);}).catch(err=>{console.error(err);setIsAuthenticated(false);setIsAdmin(false);localStorage.removeItem('token');});}else{setIsAuthenticated(false);setIsAdmin(false);}};const handleLogout=()=>{setIsAuthenticated(false);setIsAdmin(false);localStorage.removeItem('token');console.log('User logged out');};const handleLogin=token=>{localStorage.setItem('token',token);checkAuthStatus();};const handleCategoryChange=categoryId=>{setSelectedCategory(categoryId);};useEffect(()=>{// Check if the user is an admin when the component mounts\nconst token=localStorage.getItem('token');if(token){// You might want to create an API endpoint to verify if the user is an admin\naxios.get('/api/users/me',{headers:{'x-auth-token':token}}).then(response=>{setIsAdmin(response.data.isAdmin);}).catch(error=>{console.error('Error checking admin status:',error);});}},[]);return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fixed-header\"},/*#__PURE__*/React.createElement(Banner,null),/*#__PURE__*/React.createElement(\"div\",{className:\"banner-category-separator\"}),/*#__PURE__*/React.createElement(CategoryFilter,{categories:categories,selectedCategory:selectedCategory,onCategoryChange:handleCategoryChange,isAdmin:isAdmin})),/*#__PURE__*/React.createElement(\"div\",{className:\"main-content\"},/*#__PURE__*/React.createElement(Routes,null,/*#__PURE__*/React.createElement(Route,{path:\"/\",element:/*#__PURE__*/React.createElement(RecipeList,{categories:categories,selectedCategory:selectedCategory})}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/React.createElement(Navigate,{to:\"/\"}):/*#__PURE__*/React.createElement(Login,{handleLogin:handleLogin})}),/*#__PURE__*/React.createElement(Route,{path:\"/add-recipe\",element:isAuthenticated&&isAdmin?/*#__PURE__*/React.createElement(AddRecipe,null):/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"})}),/*#__PURE__*/React.createElement(Route,{path:\"/add-category\",element:isAuthenticated&&isAdmin?/*#__PURE__*/React.createElement(AddCategory,null):/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"})}),/*#__PURE__*/React.createElement(Route,{path:\"/recipe/:id\",element:/*#__PURE__*/React.createElement(RecipeDetails,{isAdmin:isAdmin})}),/*#__PURE__*/React.createElement(Route,{path:\"/edit-recipe/:id\",element:isAuthenticated&&isAdmin?/*#__PURE__*/React.createElement(EditRecipe,null):/*#__PURE__*/React.createElement(Navigate,{to:\"/login\"})}))),/*#__PURE__*/React.createElement(FloatingButtons,{isAuthenticated:isAuthenticated,onLogout:handleLogout})));}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","axios","Banner","CategoryFilter","RecipeList","Login","AddRecipe","AddCategory","RecipeDetails","EditRecipe","FloatingButtons","App","isAuthenticated","setIsAuthenticated","isAdmin","setIsAdmin","categories","setCategories","selectedCategory","setSelectedCategory","checkAuthStatus","get","then","response","data","catch","error","console","token","localStorage","getItem","headers","res","err","removeItem","handleLogout","log","handleLogin","setItem","handleCategoryChange","categoryId","createElement","className","onCategoryChange","path","element","to","onLogout"],"sources":["/Users/omerchernia/CODING/Recepie_Website/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Banner from './components/Banner'; // Import the new Banner component\nimport CategoryFilter from './components/CategoryFilter'; // Import this\nimport RecipeList from './components/RecipeList';\nimport Login from './components/Login';\nimport AddRecipe from './components/AddRecipe';\nimport AddCategory from './components/AddCategory';\nimport RecipeDetails from './components/RecipeDetails';\nimport EditRecipe from './components/EditRecipe';\nimport './App.css';\nimport FloatingButtons from './components/FloatingButtons';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false); // Set to false initially\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [categories, setCategories] = useState([]); // Add this state\n  const [selectedCategory, setSelectedCategory] = useState(null); // Add this state\n\n  useEffect(() => {\n    checkAuthStatus();\n    // Fetch categories when the component mounts\n    axios.get('/api/categories')\n      .then(response => setCategories(response.data))\n      .catch(error => console.error('Error fetching categories:', error));\n  }, []);\n\n  const checkAuthStatus = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      axios.get('/api/auth/me', {\n        headers: { 'x-auth-token': token }\n      })\n        .then(res => {\n          setIsAuthenticated(true);\n          setIsAdmin(res.data.isAdmin);\n        })\n        .catch(err => {\n          console.error(err);\n          setIsAuthenticated(false);\n          setIsAdmin(false);\n          localStorage.removeItem('token');\n        });\n    } else {\n      setIsAuthenticated(false);\n      setIsAdmin(false);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    setIsAdmin(false);\n    localStorage.removeItem('token');\n    console.log('User logged out');\n  };\n\n  const handleLogin = (token) => {\n    localStorage.setItem('token', token);\n    checkAuthStatus();\n  };\n\n  const handleCategoryChange = (categoryId) => {\n    setSelectedCategory(categoryId);\n  };\n\n  useEffect(() => {\n    // Check if the user is an admin when the component mounts\n    const token = localStorage.getItem('token');\n    if (token) {\n      // You might want to create an API endpoint to verify if the user is an admin\n      axios.get('/api/users/me', { headers: { 'x-auth-token': token } })\n        .then(response => {\n          setIsAdmin(response.data.isAdmin);\n        })\n        .catch(error => {\n          console.error('Error checking admin status:', error);\n        });\n    }\n  }, []);\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <div className=\"fixed-header\">\n          <Banner />\n          <div className=\"banner-category-separator\"></div>\n          <CategoryFilter \n            categories={categories}\n            selectedCategory={selectedCategory}\n            onCategoryChange={handleCategoryChange}\n            isAdmin={isAdmin}\n          />\n        </div>\n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/\" element={<RecipeList categories={categories} selectedCategory={selectedCategory} />} />\n            <Route path=\"/login\" element={isAuthenticated ? <Navigate to=\"/\" /> : <Login handleLogin={handleLogin} />} />\n            <Route path=\"/add-recipe\" element={isAuthenticated && isAdmin ? <AddRecipe /> : <Navigate to=\"/login\" />} />\n            <Route path=\"/add-category\" element={isAuthenticated && isAdmin ? <AddCategory /> : <Navigate to=\"/login\" />} />\n            <Route path=\"/recipe/:id\" element={<RecipeDetails isAdmin={isAdmin} />} />\n            <Route path=\"/edit-recipe/:id\" element={isAuthenticated && isAdmin ? <EditRecipe /> : <Navigate to=\"/login\" />} />\n          </Routes>\n        </div>\n        <FloatingButtons \n          isAuthenticated={isAuthenticated} \n          onLogout={handleLogout}\n        />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}